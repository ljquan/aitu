# Sora-2 è§’è‰²åˆ›å»ºåŠŸèƒ½å¼€å‘è®¡åˆ’

## åŠŸèƒ½æ¦‚è¿°

ä¸º Sora-2 è§†é¢‘æ¨¡å‹æ·»åŠ è§’è‰²åˆ›å»ºå’Œå¤ç”¨åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ä»å·²å®Œæˆçš„è§†é¢‘ä»»åŠ¡ä¸­æå–è§’è‰²ï¼Œå¹¶åœ¨åç»­è§†é¢‘ç”Ÿæˆä¸­é€šè¿‡ `@username` æ–¹å¼å¼•ç”¨è¯¥è§’è‰²ã€‚

## API æ¥å£è¯´æ˜

### 1. åˆ›å»ºè§’è‰²æ¥å£

- **URL**: `POST https://api.tu-zi.com/v1/videos`
- **Content-Type**: `multipart/form-data`

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `character_from_task` | string | æ˜¯ | æºè§†é¢‘ä»»åŠ¡IDï¼Œæ ¼å¼: `sora-2:task_xxx` |
| `model` | string | æ˜¯ | å›ºå®šå€¼: `sora-2-character` |
| `chacter_timestamps` | string | å¦ | æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼: `start,end`ï¼Œå·®å€¼éœ€åœ¨1-3ç§’å†… |

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": "sora-2-character:ch_6944ed3a51888191bd1ac40c763620fb"
}
```

### 2. æŸ¥è¯¢è§’è‰²æ¥å£

- **URL**: `GET https://api.tu-zi.com/v1/videos/{id}`
- **è®¤è¯**: Bearer Token

**å“åº”ç¤ºä¾‹**:
```json
{
  "id": "sora-2-character:ch_6944ed3a51888191bd1ac40c763620fb",
  "username": "xscjkajd.lunaradian",
  "permalink": "https://sora.chatgpt.com/profile/xscjkajd.lunaradian",
  "profile_picture_url": "https://filesystem.site/cdn/xxx.jpg"
}
```

## å¼€å‘ä»»åŠ¡æ¸…å•

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### Task 1: åˆ›å»ºè§’è‰²ç±»å‹å®šä¹‰
- **æ–‡ä»¶**: `packages/drawnix/src/types/character.types.ts`
- **å†…å®¹**:
  - `SoraCharacter` æ¥å£ï¼ˆè§’è‰²å®Œæ•´ä¿¡æ¯ï¼‰
  - `CharacterStatus` æšä¸¾ï¼ˆpending/processing/completed/failedï¼‰
  - `CreateCharacterParams` æ¥å£ï¼ˆåˆ›å»ºå‚æ•°ï¼‰
  - `CharacterQueryResponse` æ¥å£ï¼ˆæŸ¥è¯¢å“åº”ï¼‰

#### Task 2: å®ç°è§’è‰² API æœåŠ¡
- **æ–‡ä»¶**: `packages/drawnix/src/services/character-api-service.ts`
- **åŠŸèƒ½**:
  - `createCharacter()` - æäº¤è§’è‰²åˆ›å»ºè¯·æ±‚
  - `queryCharacter()` - æŸ¥è¯¢è§’è‰²çŠ¶æ€
  - `createCharacterWithPolling()` - åˆ›å»ºå¹¶è½®è¯¢ç›´åˆ°å®Œæˆ
- **ä¾èµ–**: Task 1

#### Task 3: å®ç°è§’è‰²å­˜å‚¨æœåŠ¡
- **æ–‡ä»¶**: `packages/drawnix/src/services/character-storage-service.ts`
- **åŠŸèƒ½**:
  - IndexedDB å­˜å‚¨ï¼ˆä½¿ç”¨ localforageï¼‰
  - `saveCharacter()` - ä¿å­˜è§’è‰²
  - `getCharacters()` - è·å–æ‰€æœ‰è§’è‰²
  - `getCharacterById()` - æŒ‰IDè·å–
  - `deleteCharacter()` - åˆ é™¤è§’è‰²
  - `updateCharacter()` - æ›´æ–°è§’è‰²çŠ¶æ€
- **å­˜å‚¨é”®**: `sora-characters`
- **ä¾èµ–**: Task 1

#### Task 4: åˆ›å»ºè§’è‰²çŠ¶æ€ç®¡ç† Hook
- **æ–‡ä»¶**: `packages/drawnix/src/hooks/useCharacters.ts`
- **åŠŸèƒ½**:
  - è§’è‰²åˆ—è¡¨çŠ¶æ€ç®¡ç†ï¼ˆRxJS BehaviorSubjectï¼‰
  - `characters` - è§’è‰²åˆ—è¡¨
  - `pendingCharacters` - å¤„ç†ä¸­çš„è§’è‰²
  - `createCharacter()` - åˆ›å»ºè§’è‰²ï¼ˆå¸¦çŠ¶æ€æ›´æ–°ï¼‰
  - `deleteCharacter()` - åˆ é™¤è§’è‰²
  - `refreshCharacters()` - åˆ·æ–°åˆ—è¡¨
- **ä¾èµ–**: Task 2, Task 3

### é˜¶æ®µäºŒï¼šUI ç»„ä»¶ï¼ˆé¢„è®¡ 2-3 å¤©ï¼‰

#### Task 5: å®ç°è§’è‰²åˆ›å»ºå¯¹è¯æ¡†
- **æ–‡ä»¶**: `packages/drawnix/src/components/character/CharacterCreateDialog.tsx`
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºæºè§†é¢‘ä¿¡æ¯
  - æ—¶é—´èŒƒå›´é€‰æ‹©å™¨ï¼ˆæ»‘å—æˆ–è¾“å…¥æ¡†ï¼‰
  - æ—¶é—´çº¦æŸéªŒè¯ï¼ˆ1-3ç§’ï¼‰
  - æäº¤/å–æ¶ˆæŒ‰é’®
  - åˆ›å»ºä¸­çŠ¶æ€æ˜¾ç¤º
- **UI**: ä½¿ç”¨ TDesign Dialog + Slider/InputNumber
- **ä¾èµ–**: Task 4

#### Task 6: åœ¨ TaskItem ä¸­æ·»åŠ ã€Œæå–è§’è‰²ã€æŒ‰é’®
- **æ–‡ä»¶**: `packages/drawnix/src/components/task-queue/TaskItem.tsx`
- **ä¿®æ”¹**:
  - æ·»åŠ ã€Œæå–è§’è‰²ã€æŒ‰é’®ï¼ˆä»…å¯¹ sora-2 å·²å®Œæˆä»»åŠ¡æ˜¾ç¤ºï¼‰
  - æ·»åŠ  `onExtractCharacter` å›è°ƒ
  - æŒ‰é’®æ¡ä»¶åˆ¤æ–­é€»è¾‘
- **ä¾èµ–**: Task 5

#### Task 7: å®ç°è§’è‰²å¡ç‰‡ç»„ä»¶
- **æ–‡ä»¶**: `packages/drawnix/src/components/character/CharacterCard.tsx`
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºå¤´åƒï¼ˆprofile_picture_urlï¼‰
  - æ˜¾ç¤º @username
  - å¤åˆ¶æŒ‰é’®ï¼ˆå¤åˆ¶ @usernameï¼‰
  - åˆ é™¤æŒ‰é’®
  - å¤„ç†ä¸­çŠ¶æ€ï¼ˆloadingï¼‰
- **æ ·å¼**: `character.scss`
- **ä¾èµ–**: Task 1

#### Task 8: å®ç°è§’è‰²åˆ—è¡¨/é€‰æ‹©å™¨ç»„ä»¶
- **æ–‡ä»¶**: `packages/drawnix/src/components/character/CharacterList.tsx`
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„è§’è‰²
  - æ”¯æŒé€‰æ‹©è§’è‰²ï¼ˆç”¨äºæ’å…¥æç¤ºè¯ï¼‰
  - ç©ºçŠ¶æ€æç¤º
  - å¯é€‰ï¼šæœç´¢è¿‡æ»¤
- **ä¾èµ–**: Task 4, Task 7

### é˜¶æ®µä¸‰ï¼šæç¤ºè¯é›†æˆï¼ˆé¢„è®¡ 1-2 å¤©ï¼‰

#### Task 9: åœ¨ PromptInput ä¸­é›†æˆ @ æåŠåŠŸèƒ½
- **æ–‡ä»¶**: `packages/drawnix/src/components/ttd-dialog/shared/PromptInput.tsx`
- **ä¿®æ”¹**:
  - ç›‘å¬ `@` è¾“å…¥
  - å¼¹å‡ºè§’è‰²é€‰æ‹©å™¨ï¼ˆPopup/Dropdownï¼‰
  - é€‰æ‹©åæ’å…¥ `@username`
  - æ”¯æŒé”®ç›˜å¯¼èˆªï¼ˆä¸Šä¸‹é€‰æ‹©ï¼Œå›è½¦ç¡®è®¤ï¼‰
- **æ–°æ–‡ä»¶**: `CharacterMentionPopup.tsx`
- **ä¾èµ–**: Task 4, Task 8

### é˜¶æ®µå››ï¼šçŠ¶æ€åŒæ­¥ä¸ä¼˜åŒ–ï¼ˆé¢„è®¡ 1 å¤©ï¼‰

#### Task 10: é¡µé¢åˆ·æ–°æ¢å¤
- ä» IndexedDB æ¢å¤è§’è‰²åˆ—è¡¨
- æ¢å¤å¤„ç†ä¸­çš„è§’è‰²åˆ›å»ºä»»åŠ¡
- ç»§ç»­è½®è¯¢æœªå®Œæˆçš„è§’è‰²

#### Task 11: é”™è¯¯å¤„ç†ä¸ç”¨æˆ·åé¦ˆ
- API é”™è¯¯æç¤ºï¼ˆç½‘ç»œé”™è¯¯ã€è¶…æ—¶ã€æœåŠ¡å™¨é”™è¯¯ï¼‰
- è§’è‰²åˆ›å»ºå¤±è´¥å¤„ç†
- é‡è¯•æœºåˆ¶

## æ–‡ä»¶ç»“æ„

```
packages/drawnix/src/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ character.types.ts          # è§’è‰²ç±»å‹å®šä¹‰
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ character-api-service.ts    # è§’è‰² API æœåŠ¡
â”‚   â””â”€â”€ character-storage-service.ts # è§’è‰²å­˜å‚¨æœåŠ¡
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCharacters.ts            # è§’è‰²çŠ¶æ€ç®¡ç† Hook
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ character/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ CharacterCreateDialog.tsx
â”‚   â”‚   â”œâ”€â”€ CharacterCard.tsx
â”‚   â”‚   â”œâ”€â”€ CharacterList.tsx
â”‚   â”‚   â”œâ”€â”€ CharacterMentionPopup.tsx
â”‚   â”‚   â””â”€â”€ character.scss
â”‚   â””â”€â”€ task-queue/
â”‚       â””â”€â”€ TaskItem.tsx            # ä¿®æ”¹ï¼šæ·»åŠ æå–è§’è‰²æŒ‰é’®
â””â”€â”€ components/ttd-dialog/shared/
    â””â”€â”€ PromptInput.tsx             # ä¿®æ”¹ï¼šæ·»åŠ  @ æåŠåŠŸèƒ½
```

## æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·äº¤äº’æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç”¨æˆ·ç‚¹å‡»ã€Œæå–è§’è‰²ã€                                          â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  2. CharacterCreateDialog å¼¹å‡º                                  â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  3. ç”¨æˆ·é€‰æ‹©æ—¶é—´èŒƒå›´ â†’ ç‚¹å‡»åˆ›å»º                                   â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  4. useCharacters.createCharacter()                             â”‚
â”‚     â”‚                                                           â”‚
â”‚     â”œâ”€â”€â–º characterApiService.createCharacter()                  â”‚
â”‚     â”‚         â”‚                                                 â”‚
â”‚     â”‚         â–¼                                                 â”‚
â”‚     â”‚    POST /v1/videos (character_from_task, model)           â”‚
â”‚     â”‚         â”‚                                                 â”‚
â”‚     â”‚         â–¼                                                 â”‚
â”‚     â”‚    è¿”å› character_id                                      â”‚
â”‚     â”‚                                                           â”‚
â”‚     â”œâ”€â”€â–º characterStorageService.saveCharacter(pending)         â”‚
â”‚     â”‚                                                           â”‚
â”‚     â””â”€â”€â–º å¼€å§‹è½®è¯¢ queryCharacter()                              â”‚
â”‚              â”‚                                                  â”‚
â”‚              â–¼                                                  â”‚
â”‚         GET /v1/videos/{id}                                     â”‚
â”‚              â”‚                                                  â”‚
â”‚              â–¼                                                  â”‚
â”‚         è¿”å› username, profile_picture_url                      â”‚
â”‚              â”‚                                                  â”‚
â”‚              â–¼                                                  â”‚
â”‚  5. characterStorageService.updateCharacter(completed)          â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  6. UI æ›´æ–°æ˜¾ç¤ºè§’è‰²å¡ç‰‡                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI è®¾è®¡å‚è€ƒ

### 1. æå–è§’è‰²æŒ‰é’®ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TaskItem (sora-2 å·²å®Œæˆä»»åŠ¡)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ¬ [prompt text...]                                            â”‚
â”‚                                                                 â”‚
â”‚  sora-2 | 10ç§’ | 1920x1080 | âœ… å·²å®Œæˆ                          â”‚
â”‚                                                                 â”‚
â”‚  [é¢„è§ˆå›¾]                                                        â”‚
â”‚                                                                 â”‚
â”‚  [åˆ é™¤] [ä¸‹è½½] [æ’å…¥] [ç¼“å­˜] [ç¼–è¾‘] [ğŸ‘¤ æå–è§’è‰²]                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. è§’è‰²åˆ›å»ºå¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æå–è§’è‰²                                                   [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ä»è§†é¢‘ä¸­æå–è§’è‰²ï¼Œåˆ›å»ºåå¯åœ¨åç»­è§†é¢‘ä¸­é€šè¿‡ @username å¼•ç”¨        â”‚
â”‚                                                                 â”‚
â”‚  æºè§†é¢‘: ä¸€åªç™½è‰²çš„çŒ«åœ¨èŠ±å›­é‡Œç©è€...                             â”‚
â”‚  ä»»åŠ¡ID: sora-2:task_01kbh21pg...                               â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  æ—¶é—´èŒƒå›´ (è§’è‰²åœ¨è§†é¢‘ä¸­å‡ºç°çš„ä½ç½®)                               â”‚
â”‚                                                                 â”‚
â”‚  å¼€å§‹æ—¶é—´: [0   ] ç§’    ç»“æŸæ—¶é—´: [3   ] ç§’                     â”‚
â”‚                                                                 â”‚
â”‚  â“˜ æ—¶é—´èŒƒå›´éœ€åœ¨ 1-3 ç§’ä¹‹é—´                                      â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚                               [å–æ¶ˆ]  [åˆ›å»ºè§’è‰²]                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è§’è‰²å¡ç‰‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  å¤´åƒ  â”‚  @xscjkajd.lunar...  â”‚
â”‚  â”‚  64x64 â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  [ğŸ“‹ å¤åˆ¶] [ğŸ—‘ åˆ é™¤] â”‚
â”‚                                  â”‚
â”‚  æ¥æº: ç™½çŒ«è§†é¢‘ä»»åŠ¡              â”‚
â”‚  åˆ›å»ºäº: 2024-01-15 14:30        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. @ æåŠå¼¹çª—

```
æç¤ºè¯è¾“å…¥æ¡†:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸€åªçŒ«åœ¨è¿½é€ @|                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ğŸ“· @xscjkajd.lunaradian        â”‚ â† é€‰ä¸­
        â”‚ ğŸ“· @abc123.character            â”‚
        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
        â”‚ + ä»è§†é¢‘æå–æ–°è§’è‰²...            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯è¦ç‚¹

### 1. æ¨¡å‹åˆ¤æ–­é€»è¾‘

```typescript
// åˆ¤æ–­æ˜¯å¦å¯ä»¥æå–è§’è‰²
const canExtractCharacter = (task: Task): boolean => {
  return (
    task.status === TaskStatus.COMPLETED &&
    task.type === TaskType.VIDEO &&
    task.remoteId?.startsWith('sora-2:') &&
    ['sora-2', 'sora-2-pro'].includes(task.params.model || '')
  );
};
```

### 2. æ—¶é—´èŒƒå›´éªŒè¯

```typescript
const validateTimestamps = (start: number, end: number, videoDuration: number): boolean => {
  const duration = end - start;
  return (
    start >= 0 &&
    end <= videoDuration &&
    duration >= 1 &&
    duration <= 3
  );
};
```

### 3. IndexedDB å­˜å‚¨ç»“æ„

```typescript
// å­˜å‚¨é”®: 'sora-characters'
// æ•°æ®ç»“æ„: SoraCharacter[]
{
  id: 'sora-2-character:ch_xxx',
  username: 'xscjkajd.lunaradian',
  profilePictureUrl: 'https://...',
  permalink: 'https://...',
  sourceTaskId: 'local-task-uuid',
  sourceVideoId: 'sora-2:task_xxx',
  characterTimestamps: '0,3',
  status: 'completed',
  createdAt: 1705312200000,
  completedAt: 1705312260000,
}
```

## æµ‹è¯•è¦ç‚¹

1. **API é›†æˆæµ‹è¯•**
   - è§’è‰²åˆ›å»ºè¯·æ±‚æ ¼å¼æ­£ç¡®
   - è½®è¯¢æŸ¥è¯¢æ­£å¸¸å·¥ä½œ
   - é”™è¯¯å“åº”å¤„ç†

2. **UI äº¤äº’æµ‹è¯•**
   - æå–è§’è‰²æŒ‰é’®ä»…å¯¹ç¬¦åˆæ¡ä»¶çš„ä»»åŠ¡æ˜¾ç¤º
   - æ—¶é—´èŒƒå›´é€‰æ‹©å™¨çº¦æŸæ­£ç¡®
   - è§’è‰²åˆ›å»ºçŠ¶æ€å®æ—¶æ›´æ–°
   - @ æåŠå¼¹çª—æ­£ç¡®æ˜¾ç¤ºå’Œé€‰æ‹©

3. **æ•°æ®æŒä¹…åŒ–æµ‹è¯•**
   - åˆ·æ–°é¡µé¢åè§’è‰²åˆ—è¡¨æ¢å¤
   - è§’è‰²åˆ é™¤åæ­£ç¡®ç§»é™¤
   - å¤„ç†ä¸­ä»»åŠ¡æ¢å¤è½®è¯¢

## å¼€å‘é¡ºåºå»ºè®®

```
Week 1:
â”œâ”€â”€ Day 1-2: Task 1-3 (ç±»å‹å®šä¹‰ + APIæœåŠ¡ + å­˜å‚¨æœåŠ¡)
â”œâ”€â”€ Day 3: Task 4 (çŠ¶æ€ç®¡ç† Hook)
â””â”€â”€ Day 4-5: Task 5-6 (åˆ›å»ºå¯¹è¯æ¡† + TaskItemæŒ‰é’®)

Week 2:
â”œâ”€â”€ Day 1-2: Task 7-8 (è§’è‰²å¡ç‰‡ + åˆ—è¡¨ç»„ä»¶)
â”œâ”€â”€ Day 3-4: Task 9 (@ æåŠåŠŸèƒ½)
â””â”€â”€ Day 5: Task 10-11 (çŠ¶æ€åŒæ­¥ + é”™è¯¯å¤„ç†)
```

## åç»­æ‰©å±•

1. **è§’è‰²åº“é¢æ¿** - ç‹¬ç«‹çš„è§’è‰²ç®¡ç†ç•Œé¢
2. **è§’è‰²åˆ†ç»„/æ ‡ç­¾** - ç»„ç»‡å’Œç­›é€‰è§’è‰²
3. **è§’è‰²ä½¿ç”¨ç»Ÿè®¡** - è¿½è¸ªè§’è‰²ä½¿ç”¨é¢‘ç‡
4. **æ‰¹é‡å¯¼å‡º** - å¯¼å‡ºè§’è‰²æ•°æ®å¤‡ä»½
5. **è§’è‰²åˆ†äº«** - è·¨è®¾å¤‡åŒæ­¥è§’è‰²ï¼ˆéœ€åç«¯æ”¯æŒï¼‰
