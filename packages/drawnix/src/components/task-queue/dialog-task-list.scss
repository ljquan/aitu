/**
 * DialogTaskList Styles
 * Compact task list for display within generation dialogs
 * 
 * 注意：任务项的布局由 TaskItem 组件自带的响应式 Grid 布局控制（见 task-queue.scss）
 * 此处只定义容器样式和微调
 */

.dialog-task-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  border-radius: 8px;
  min-height: 100%;
  max-height: 100%;
  overflow-y: visible;
  height: 100%;

  &__header {
    flex-shrink: 0;
    padding-bottom: 8px;
    border-bottom: 1px solid #f0f0f0;
    h4 {
      margin: 0;
      font-size: 13px;
      font-weight: 600;
      color: #424242;
    }
  }

  &__content {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
    min-height: 0;
    // 注意：overflow 由内部的 .virtual-task-list-scrollarea 控制
    // 这里不设置 overflow，避免双重滚动
    overflow: visible;
  }

  &__empty {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 16px;
    color: #999;
    font-size: 13px;
    text-align: center;
    flex: 1;
    min-height: 100px;

    p {
      margin: 0;
    }
  }

  // 弹窗内任务项的微调（不覆盖布局，只调整尺寸）
  .task-item {
    padding: 10px;
    font-size: 12px;

    // 弹窗内预览图稍小
    &__preview-wrapper {
      width: 100px;
      height: 75px;
    }

    // 弹窗内提示词最多显示2行
    &__prompt {
      font-size: 12px;
      -webkit-line-clamp: 2;
    }

    // 弹窗内标签更紧凑
    &__tags {
      .t-tag {
        font-size: 10px !important;
        height: 16px !important;
        padding: 0 4px !important;
      }
    }

    // 弹窗内时间等详情更小
    &__details {
      font-size: 10px;
    }

    // 弹窗内主按钮更小
    &__primary-action {
      height: 24px !important;
      padding: 0 8px !important;
      font-size: 11px !important;
    }

    // 弹窗内次要按钮更小
    &__secondary-actions {
      .t-button {
        height: 22px !important;
        width: 22px !important;
      }
    }
  }
}

// 响应式适配 - 移动端
@media (max-width: 768px) {
  .dialog-task-list {
    padding: 0;
    gap: 6px;
    height: auto;
    min-height: auto;
    max-height: none;

    &__header {
      padding-bottom: 6px;

      h4 {
        font-size: 12px;
      }
    }

    &__content {
      gap: 6px;
    }

    // 移动端强制使用紧凑布局
    .task-item {
      padding: 8px;
      // 强制使用紧凑布局的 Grid 布局
      grid-template-columns: 80px 1fr !important;
      grid-template-areas: 
        "preview prompt"
        "info    info" !important;

      // 隐藏 checkbox 列（移动端通常不需要）
      &__checkbox {
        display: none;
      }

      &__preview-wrapper {
        grid-area: preview;
        width: 80px !important;
        height: 60px !important;
      }

      &__body {
        display: contents;
      }

      &__prompt-area {
        grid-area: prompt;
      }

      &__info-area {
        grid-area: info;
        margin-top: 4px;
      }
    }
  }
}

@media (max-width: 480px) {
  .dialog-task-list {
    padding: 0;
    gap: 4px;

    &__header {
      padding-bottom: 4px;

      h4 {
        font-size: 11px;
      }
    }

    &__content {
      gap: 4px;
    }

    // 更小屏幕下的超紧凑布局
    .task-item {
      padding: 6px;
      grid-template-columns: 70px 1fr !important;

      &__preview-wrapper {
        width: 70px !important;
        height: 52px !important;
      }

      &__prompt {
        font-size: 11px !important;
        -webkit-line-clamp: 2 !important;
      }

      &__tags {
        gap: 2px;
        .t-tag {
          font-size: 9px !important;
          height: 14px !important;
          padding: 0 3px !important;
        }
      }

      &__details {
        font-size: 9px;
        flex-wrap: wrap;
        gap: 2px 4px;
      }

      &__actions {
        gap: 4px;
      }

      &__primary-action {
        height: 22px !important;
        padding: 0 6px !important;
        font-size: 10px !important;
      }

      &__secondary-actions {
        .t-button {
          height: 20px !important;
          width: 20px !important;
        }
      }
    }
  }
}
